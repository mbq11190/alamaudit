# Audit Planning Compliance

> Prepared in accordance with ISA 300, ISA 315 (Revised 2019), ISA 320, ICAP Audit Practice Manual guidance, SECP auditor obligations, PSX audit committee ToRs and PICG governance references.

## Feature map vs authoritative guidance

| Feature | UI / Model | Citation |
| --- | --- | --- |
| Engagement acceptance & independence log | `audit.engagement` form smart buttons | (ISA 300 para 7; ICAP APM section 3.1; SECP Guide section 2) |
| Materiality engine with justification | `audit.materiality` form & wizard | (ISA 320 para 10-14; ICAP APM section 5) |
| Risk register & response linkage | `audit.risk.assessment` kanban | (ISA 315 para 25-32) |
| PBC lifecycle & audit trail | `audit.pbc.request` kanban/tree | (ISA 300 para 13; ICAP APM section 7; SECP Guide section 4) |
| Staffing & approvals | `audit.staff.plan` form | (PSX ToR section 5; PICG audit committee guide) |
| Timeline & dependency alerts | `audit.timeline.task` Gantt/calendar | (ISA 300 para 9) |
| Governance packs & SECP export | `action_export_secp_package` server action | (SECP Guide section 5; PSX ToR section 8) |
| Audit evidence ledger | `audit.evidence.log` | (ISA 300 para 11; ICAP QCR guidance) |

## Installation

```bash
odoo -i audit_planning_compliance --test-enable -d <dbname>
```

Ensure `document`, `hr`, and `account` modules are installed so that staffing, attachments, and trial balance hooks are available.

## Usage highlights

1. **Create engagement** via *Audit › Planning › Engagements*. Fill legal form and entity class; upload engagement letter. (ISA 300 para 8)
2. **Run materiality wizard** from the engagement smart button. Select basis (PBT, revenue, assets, equity) and capture justification. (ISA 320 para 10)
3. **Populate risk register** using the *Risk & Responses* smart button. High/very high risks require triggers and procedure links. (ISA 315 para 31)
4. **Generate default PBC list** using entity class templates, track reminders, and upload evidence. (ICAP APM section 7)
5. **Assign staffing plan** with required partner approval for listed entities. (PSX audit committee ToR)
6. **Track timeline** in Kanban/Calendar; overdue tasks raise alerts and generate evidence entries. (ISA 300 para 9)
7. **Export Planning Memorandum** from the engagement to obtain ISA-referenced PDF ready for audit committee briefing. (ISA 300 para 12)

## Tests

Automated tests cover materiality thresholds, risk scoring, PBC lifecycle, permissions, and SECP export packaging. Run:

```bash
odoo -i audit_planning_compliance --test-enable -d <dbname>
```

## Compliance footer

All autogenerated emails and reports include: *"Prepared in accordance with ISA 300, ISA 315, ISA 320 and local guidance (ICAP/SECP/PSX). See system audit trail for supporting evidence."*
